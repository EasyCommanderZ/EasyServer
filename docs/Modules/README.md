# /Docs/Modules

记录关于项目中代码文件的划分。按照功能初步划分如下：

1. log：server中的日志模块
2. http：处理HTTP请求
3. server：使用epoll处理socket连接
4. thread：多线程相关的实现，如线程池等
5. addons：额外功能
6. Tests：功能测试和性能测试



先暂时按照如上划分。在WebServer中还有一些地方需要封装一个Timer来处理不活动的连接，需要封装buffer来实现一个功能更完善的缓冲区。虽然作为server的优化功能，添加的时候也与server平级，然后作为引用引入。

目前对于实现顺序的想法，根据相互之间引用关系，thread是最基本的，server中的epoll以及server相关函数的实现都需要借助thread，另外，要实现多线程的异步日志模块，也需要使用到thread，所以首先实现thread。

http是相对独立的，它的功能是提供对网络包的校验，解析和构建，只需要提供接口给server即可，本身可以不涉及到其他的功能。

log也是如此，~~除了需要thread以外~~，功能和WebServer的其他部分相对独立。



所以，实现顺序应当首先实现thread，然后实现log，之后实现server以及http。先把这些核心功能实现，并且实现相应的测试。



## **Update 22.07.14**

目前已经大概实现了 server 的基本功能，因为着急实现完整功能，没有在实现过程中边记录。正好也复盘一下实现，补一下文档，更好的理解这次的开发过程。

目前代码划分如下：

1. Log ：日志模块，也是最先实现的那部分，支持异步日志
2. Thread ：线程池和线程信息获取的功能
3. Reactor ： 项目的核心，事件处理模块，也是最复杂，实现的时候bug最多的部分
4. Http ：Http 请求与事件绑定，解析 http 请求
5. Util ：一些功能类，包括封装对时间戳的处理，以及 sock 读写相关的函数等
6. Server ：server 的初始化类，启动入口
7. tests ：关于模块的一些功能测试

之后应该还要添加 

1. addon ：额外功能。主要有两个想实现：

   - RTMP 等协议的音视频流传输，通俗来说就是直播功能
   - 基于前者或者 WebRTC 等技术的音视频通话

   这部分应该会比较复杂，还有很多新东西要学。

2. Webbench ： 使用 WebBench 对项目进行性能测试。这一点目前来说优先级比较高。



